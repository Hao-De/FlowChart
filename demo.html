<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Untitled Document</title>
    <style>
		body{
			margin: 0;
		}
		canvas{
			border: 0.5px solid black;
		}
	</style>
</head>
<body>
	<canvas id="canvas_flow_chart">Your browser does not support CANVAS, please update to the latest version.</canvas>
	<input type="button" value="test" id="testBtn">
	
	<script src="flowchart.js"></script>
	<script>
		(function(window){
			'use strict';
			
			let chart = new FlowChart("canvas_flow_chart", {
				gap: 50,
				width: 600,
				height: 400,
				hasGrid: true,
//				bgColor: "#FBFAE1"
			});
			
			let circle = FlowChart.circle({
				x: 4,
				y: 1,
				radius: 0.1,
				isFill: true,
				fillColor: "blue",
				strokeColor: "red",
				lineWidth: 0.05
			});
			let rect = FlowChart.rect({
				x: 1,
				y: 1,
				width: 2,
				height: 1,
				isFill: false,
				fillColor: "#000",
				strokeColor: "red",
				lineWidth: 0.02
			});
			let roundRect = FlowChart.rect({
				x: 1,
				y: 3,
				width: 2,
				height: 1,
//				isFill: true,
				fillColor: "red",
				strokeColor: "black",
				lineWidth: 3,
				radius: 0.3 
			});
			let rhom = FlowChart.rhom({
				x: 1,
				y: 5,
				width: 2,
				height: 1,
				isFill: false,
				fillColor: "#000",
				strokeColor: "red",
				lineWidth: 3
			});
			let text = FlowChart.text({
				text: "Test Font",
				x: 7,
				y: 4,
				fontSize: 1,
				Color: "green",
				maxWidth: null,
				alignX: "center",
				alignY: "center"
			});
			let arrow = FlowChart.arrow({
				lineWidth: 0.05,
				arrowhead: true,
				twoHead: true,
				point: [ [3, 1.5], [4, 1.5], [4, 3.5], [3, 3.5] ],
				color: "red",
				headStyle: {
					color: "green",
				}
			});
			
			chart.add( circle, rect, roundRect, rhom, text, arrow );
			
			document.getElementById("testBtn").addEventListener("click", function(){
				rect.y = 1.5;
				arrow.point = [ [3, 2], [4, 2], [4, 3.5], [3, 3.5] ];
				text.maxWidth = 2;
				chart.update(); // 手動重繪畫布
				
				chart.remove( rhom ); // 移除菱形
			});
			
		})(window);
	</script>
</body>
</html>